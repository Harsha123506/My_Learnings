Core C# / .NET

What is the difference between .NET Framework, .NET Core, and .NET (5+)?

1>open source , small, fast , built in dependency, cross platform, --- mobile development compatible.

Explain value types vs reference types with real examples.

1> store data in heap , stores the address in heap.

What are immutable types? Why is string immutable?

types cannot be changed, to maintain consistency and performance.(stack is small so better to store them in heap)

What happens internally when you use string.Concat vs StringBuilder?

will create new string by appending new value , sb append it to same reference.

Explain boxing and unboxing. How can it impact performance?

convert value to reference type, need to store in heap which is slower, Garbage collection Over Head, runtime checks.

What is the difference between struct and class? When would you use a struct?

value type, Light Weight and fast, Used for to store simple Data. Stores in stack Memory.

What is Span<T> and where is it useful?

allows to store the part of collection data. Improves performance. 

What is IDisposable and how does using work internally?

it is an interface which will release unmanaged resources explicitly, calls dispose method with boolean dispose parameter.
Finalizer called when detructor is declared within the class.

What is the difference between finalize and dispose?

will call by GC to release unmanaged resources.

How does Garbage Collection work in .NET (Generations 0,1,2)?

marking , sweeping , compacting. dataa in if condition for loops , objects , variables , static and global variables.

OOP & Design Principles

1> polymorphism , abstraction , encapsulation , inheritance., solutions for problems in day to day coding.

Explain SOLID principles with real-world examples.

Singlresponsibility , open closed , Liskov substitution , Inteface segregation , Dependency inversion.

What is the difference between abstract class and interface (including default interface methods)?

properties , multiple inheritence , constructor, contract - common behaviour.

What is dependency injection and why is it important?

using the object from external resource instead of crating it within class to remove tight coupling.

Explain method overloading vs method overriding.

methods with different signature, include inheritance.can use within same class.

What is polymorphism and how is it implemented in C#?

changing the behaviour of the method based on its type.

What are sealed classes and methods?

retrict inheritence.

What is composition vs inheritance? Which do you prefer and why?

creating an object within the same class, 
class has other objects and delegates behaviour of them.

🔹 Advanced C#

What are delegates? How are they different from interfaces?

functional pointers -- contract to class.

Explain Func, Action, Predicate.

they are built in Generic Delegates return type, void , boolean.

What are events and how are they implemented?

they are notification mechanismbuild top of the delegates.

Difference between IEnumerable, ICollection, IList.

Iterator(linq , db queries, only read), Modifications + size (Operations) , Ordered + indexing properties(searching).

Difference between IEnumerable and IQueryable.

inmemory representation of sequence of Object data.Used to iterate over lists, representation of quereable data source that can be transfored into query language.

What is LINQ deferred execution?

the data is not iterates when u define since it works on lazy loading by default. when toListAsycn(),.count(),.First(),.Any(). It will execute the iteration.

What is Expression Tree and where is it used?

Explain Covariance and Contravariance.

mechanism used more derived types when low derved is expected.

What are Records in C#? How are they different from classes?

What is with keyword in records?

with :  used to create a similar version of record with modifications.
records :: help us to minimise the boileer plate for value type equity implementation

Asynchronous Programming & Multithreading

Difference between async/await and Task.Run.
makes execution asynchrnous(doesnt create a thread) , assign worker thread to cpu bound work(computations, processing)

What happens if you don’t use await?
execution doesnt await for the method to complete instead complete the execution. fire and forgot throws errors will cause the app crash r silent executions

Explain deadlock in async code and how to prevent it.

happens when two threads are waiting for each other , when sychrnous blocking happens for asynchrnous tasks.(task.Results,return "string");

await method releases control waiting for the task completion but task is never returned so the method returning task is waiting for task (task.Result)

Difference between Task and Thread.

Each thread is representation of OS Thread , Represents Unit of work, Manages threads efficiently and async await operations.excepions creash if not handled manually.

What is SynchronizationContext?

it is ana abstractions over context executed by thread or environment. it decides when the continuation happend on which thred.

What is ConfigureAwait(false) and when should you use it?

reduces context capture over head,
prevents deadlock.

Explain Parallel.For vs Task.WhenAll.

Iteration of loops in parallel , trigger multiple async operation at onece waiting all of them to complete.

when u need to iterate independently oncpu bound operations, i/o bound r async task 

What is race condition? How do you avoid it?

When 2 threads try to read at same time the outcome might be upredectable. 
use Locks , Monitors, Semaphores, Type Safe Collections.

Difference between lock, Monitor, Mutex, SemaphoreSlim.
scope : In process , Mutex : Cross process
Level : High , Low, OS LEVEL, Light Weight
semaphores : async support
mutex : slow performance
Lock : No timeout support

What is ThreadPool?
They are the Group of background threads provided by .NET to execute asynchronous work efficiently.since the OS thread is cost effective.

ThreadPool starvation?
When all thread pool threads were blocked. The execution will be slower.

Memory & Performance

What causes memory leaks in .NET?
1> WHen event are not subscribed.  p.SomeEvent -= Handle;
2> static List<object> _cache = new();  
3> improper use of dispose
4> Collections iterate infinitely

How do you detect and fix memory leaks?
watch memory behavious , Use profiling tools
1> Use Size Limit,Memory Cache  for static Fields
2> Unsubscribe event Handklers
3> Proper Use of dispose

What is LOH (Large Object Heap)?
Its a special part in Heap used to store large Objects.since copying it will be Difficult while GC.Objects >= 85000Bytes

Difference between GC.Collect() and automatic GC.

Manual , Automatic 
can Hurt Performance, Optimised
When there is a release of large memory after memory compaction u can use GC.Collect().

How do weak references work?
GC ignores weak references if the string ref are present.
weak ref.TryGetTarget(out var value) ==> check if it GCollected.

What is stack allocation vs heap allocation?
stack -- method scoped , Cleared when the method returns, directly accessable
Heap -- scope varied , GC collected, accessable by pointers.

What tools do you use for performance profiling?
Memory Usage ,CPU Usage , Events Timelines, Parallel/Threads

🔹 ASP.NET / Web API (If applicable)

//Difference between ASP.NET MVC and Web API.

What is middleware?
Its the code that sits in the request pipeline to handle requests and responses.

What is dependency injection lifecycle (Singleton, Scoped, Transient)?

Explain Model Binding and Model Validation.
1> Converting the incoming request data to .NET objects. It reads , query Params , form data , route data and headers to bind to action parameters.
2> Validating the model data based on data annotations or custom validation logic. (data Notattions, IValidatableObject,ValidationAttribute))
public IEnumerable<ValidationResult> Validate(ValidationContext context)
{
    if (Age < 18) yield return new ValidationResult("Must be 18 or older");
}

public class EvenNumberAttribute : ValidationAttribute
{
    public override bool IsValid(object value) => (int)value % 2 == 0;
}

Difference between Authentication and Authorization.

What is JWT and how does it work?

How does exception handling work in Web API?

What is CORS?
Its restricts web applications running on one domain from accessing resources on a different domain. to prevent cross site scripting attacks.

How do you implement logging and monitoring?
1>
private readonly ILogger<HomeController> _logger;
builder.Logging.AddConsole();

2>Log.Logger = new LoggerConfiguration()
    .WriteTo.Console()
    .WriteTo.File("logs/log.txt", rollingInterval: RollingInterval.Day)
    .CreateLogger();

builder.Host.UseSerilog();

Monitoring :
1> 
builder.Services.AddHealthChecks()
    .AddSqlServer(connectionString)
    .AddRedis(redisConnection);

app.MapHealthChecks("/health");

2>Application Insights

How do you handle high concurrency in APIs?

Entity Framework / Data Access
------------------------------

Difference between EF Core and EF 6.
New , Old
sqllite,cosmosdb,postgresql ,mariadb support
fully async support
faster , cross platform

What is DbContext lifetime?
transcient(short Lived Operations),scoped(used in majority of web apps) , singleton(db is not thread safe so wont be used)

What is Change Tracking?
its the mechanism by which ef tracks the changes that are loaded by dbcontext.

Difference between Lazy, Eager, and Explicit loading.
Lazy Loading: related data is loaded when it is accessed for the first time. eg: navigation properties marked as virtual.
Eager Loading: related data is loaded along with the main entity using Include method. eg: context.Blogs.Include(b => b.Posts).ToList();
Explicit Loading: related data is loaded on demand using the Load method. eg: context.Entry(blog).Collection(b => b.Posts).Load();

What is AsNoTracking?
improves performance for read-only operations by disabling change tracking for the retrieved entities
var user = context.Users.AsNoTracking()
                        .FirstOrDefault(u => u.Id == 1);

What is migration and how does it work?
dotnet ef migrations add InitialCreate
creates a migration file that contains the schema changes.Up() and Down() methods to apply or revert changes.
dotnet ef database update
dotnet ef migrations remove -- removes the last migration if not applied to db.
dotnet ef database update <PreviousMigration> -- reverts to a previous migration.

How do you optimize EF queries?
1> use asNoTracking for read only operations.
2> use projection to select only required columns.
3> use pagination to limit the number of records retrieved.
4> use compiled queries for frequently executed queries.
5> avoid n+1 query problem by using eager loading.

What is N+1 query problem?
to fetch the related data for a collection of entities, ef executes an additional query for each entity in the collection.(use eager loading to solve this))

Difference between FromSqlRaw and ExecuteSqlRaw.
FromSqlRaw : is used to execute raw SQL queries that return entities.(SELECT statements)
var users = context.Users
                   .FromSqlRaw("SELECT * FROM Users WHERE IsActive = 1")
                   .ToList();

ExecuteSqlRaw : is used to ex]ecute raw SQL commands that do not return entities.(INSERT, UPDATE, DELETE) RETURNS number of rows affected.
var rowsAffected = context.Database
                          .ExecuteSqlRaw("UPDATE Users SET IsActive = 0 WHERE LastLogin < {0}", cutoffDate);


When would you use Dapper instead of EF?
When u need Modeling , Chage tracking we use ef ,while use dappper when u want performance and sql control.
When We use micro ORM for better performance and control over SQL queries.


Design Patterns (Must-know for 6+ years)

Singleton (thread-safe implementation)  : single responsibility

public static Lazy<type> instance = new(() => new Singleton() ,isThreadSafe :true);

Singleton :: Configurations, Logging, InMemory Cache
Scoped :: DB Context , Repository, Business Service
Transcient(Light Weight, no Shared Data) :: Validators, formatters , Small calculation services

//Factory vs Abstract Factory

Repository Pattern (pros & cons) :: Dependency Inversion
pros : separation of concerns, Testability, Abstraction over data source
cons : Repository Over EF(extra Boiler Plate),Leaky abstractions 


Unit of Work :: SRP and DI
do changes and commit only once. EF auto perform UOW in same repository
pros :: Multiple Repositories one transactions 
cons :: wrapping ef core , one global UoW, 

Strategy Pattern :: OCP & DI
Lets u implement different startegies based on the type during run time.
pass the startegy Object to the repective class.
pros : multiple algorithms
cons : one implementation , Tiny Logic.

Observer Pattern :: OCP and DI
1> Create IObservableService(Implement Subscribe -- to subscribe, Update--to add Observer to NotificationsList)
2> Create Unsubscribe disposable class
3> Create IObserver classes (implement ONComplete(), OnError(Exception exp), OnNext(int num))
4> call and subscibe and then update to call the notify the data.

Decorator Pattern  follows Open/Closed Principle

Create Inetrface , concrete class Pair
Create a common class inheriting concrete class
implement derived classes from common class 
pass the mutated Object to the next constructor.

CQRS :: SRP & OCP & DI
Separates the query Operations to 2 models read and Write.

//Mediator Pattern

Builder Pattern ::  SRP & OCP & DI

create the Building of an Complex Object by different methods.

 public ICarBuilder AddHeatedSeats()
    {
        _car.HeatedSeats = true;
        return this;
    }

Scenario-Based / Real-World

//How would you improve performance of a slow API?

How do you handle distributed transactions?

U can achieve it by using 
saga pattern(a long transaction break down into small transactions ), Outbox pattern(a outbox event will be sent)

How do you design a scalable system in .NET?
using stateless services, 
select architectural style (Monolith, Modular monolith, Microservices)
Appply solid and design patterns
Asynchronous Code
Use Caching
Monitoring 
Security
Handle Failures

How do you handle exception logging in production?
1> Global Exception Handling 
2> Logging and Monitoring , Correlation IDs (trace a request)
3> Alerts for Critical exceptions.

How do you secure sensitive data in a .NET application?
Encoding and parameterised queries.
RateLimiting , JWT/api keys  ,CORS Restrictions
Hashing sensitive data.
store data in environment variables , Azure Key Vault, 
use Https / TLS

Describe a production issue you faced and how you fixed it.

How do you review code as a senior developer?
Design & architecture
Correctness
Maintainability
Performance
Security
Style & conventions (last)

How do you ensure thread safety in your application?
Avoid shared mutable state
Use async/await correctly
Use Threadsafe collections
Thread-safe singletons

Bonus (Often Asked)

Difference between ref, out, in.

What is readonly vs const?
const : compile time constant, must be intitialised, cannot support reference types,  
readonly : runtime Constant, assign in the compiler r in declaration, can support reference types

What is dynamic keyword?
allows us to set the datatype at runtime
usage :: COM / Interop , JSON

What are extension methods?
allows us to add the method to the data types without changing its state.


public static string changeState(this string str){
return str.toUpperCase()[0];
}

"kjabxkiw".changeState();

What are records in C#? When would you use them?
Records are reference types designed to represent immutable data with value-based equality.
we can create the new modified Object using with statement

Explain pattern matching and its real-world use.
if (x is Customer c)  allows to extract the data of Object in One line

Explain Managed vs Unmanaged memory
Not Managed By CLR eg files handles, Db Connections , OS Memory, Native Library

REST Full Principles?
Client Server Seperation
statelessness -- server wont store the data of client
cachebiability -- Responses can say they can be cacheable
uniform Interface -- Resource Based Urls, meaningful HTTP Methods,Requests & responses must include:headersmedia typemetadata, Layered System.

PI functionality?

Handle Large Dataset in DB ?
use Filtering , Pagination, stream, Aggregate, 
Indexing 
modelBuilder.Entity<Order>()
    .HasIndex(o => o.CreatedAt);